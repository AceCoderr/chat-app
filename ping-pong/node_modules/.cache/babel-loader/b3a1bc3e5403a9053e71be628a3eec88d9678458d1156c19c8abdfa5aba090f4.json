{"ast":null,"code":"var _jsxFileName = \"A:\\\\Akka\\\\Ping-Pong-FE\\\\ping-pong\\\\src\\\\Components\\\\Chat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport '../Styles/Chat.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Chat({\n  roomData,\n  username,\n  setUsername\n}) {\n  _s();\n  const {\n    roomId\n  } = useParams();\n  const navigate = useNavigate();\n  const [messages, setMessages] = useState([]);\n  const [inputMessage, setInputMessage] = useState('');\n  const [participants, setParticipants] = useState([]);\n  const [connected, setConnected] = useState(false);\n  const [showNamePrompt, setShowNamePrompt] = useState(!username);\n  const [tempUsername, setTempUsername] = useState('');\n  const [error, setError] = useState(null);\n  const socketRef = useRef(null);\n  const messagesEndRef = useRef(null);\n\n  // Handle initial connection and cleanup\n  useEffect(() => {\n    if (username && !connected) {\n      connectToRoom();\n    }\n    return () => {\n      disconnectFromRoom();\n    };\n  }, [roomId, username]);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n  const connectToRoom = () => {\n    try {\n      const wsUrl = `ws://localhost:8080/ws/chat/roomId=${roomId}`;\n      const socket = new WebSocket(wsUrl);\n      socketRef.current = socket;\n      socket.onopen = () => {\n        console.log('WebSocket connection established');\n        setConnected(true);\n\n        // Send join message with username\n        // const joinMessage = {\n        //   type: 'JOIN',\n        //   username: username,\n        //   timestamp: new Date().toISOString()\n        // };\n        // socket.send(JSON.stringify(joinMessage));\n\n        // Add system message\n        setMessages(prev => [...prev, {\n          text: `You joined the chat as ${username}`,\n          type: 'system'\n        }]);\n      };\n      socket.onmessage = event => {\n        console.log(event.data);\n        const message = JSON.parse(event.data);\n        if (message.type === 'USER_LIST') {\n          setParticipants(message.users);\n        } else if (message.type === 'USER_JOINED') {\n          setParticipants(prev => [...prev, message.username]);\n          setMessages(prev => [...prev, {\n            text: `${message.username} joined the chat`,\n            type: 'system'\n          }]);\n        } else if (message.type === 'USER_LEFT') {\n          setParticipants(prev => prev.filter(user => user !== message.username));\n          setMessages(prev => [...prev, {\n            text: `${message.username} left the chat`,\n            type: 'system'\n          }]);\n        } else {\n          // Regular chat message\n          setMessages(prev => [...prev, {\n            text: message.text,\n            type: message.username === username ? 'sent' : 'received',\n            sender: message.username\n          }]);\n        }\n      };\n\n      // socket.onclose = () => {\n      //   console.log('WebSocket connection closed');\n      //   setConnected(false);\n      //   setMessages(prev => [...prev, { text: 'Disconnected from chat server', type: 'system' }]);\n      // };\n\n      socket.onerror = error => {\n        console.error('WebSocket error:', error);\n        setError('Connection error. Please try again.');\n        setConnected(false);\n      };\n    } catch (err) {\n      setError(`WebSocket connection error: ${err.message}`);\n    }\n  };\n  const disconnectFromRoom = () => {\n    if (socketRef.current) {\n      socketRef.current.close();\n      socketRef.current = null;\n    }\n  };\n  const handleSetUsername = () => {\n    if (!tempUsername.trim()) return;\n    setUsername(tempUsername);\n    setShowNamePrompt(false);\n  };\n  const sendMessage = e => {\n    e.preventDefault();\n    if (!inputMessage.trim() || !connected || !socketRef.current) return;\n    const messageObject = {\n      type: 'MESSAGE',\n      text: inputMessage,\n      username: username,\n      timestamp: new Date().toISOString()\n    };\n    socketRef.current.send(JSON.stringify(messageObject));\n    setInputMessage('');\n  };\n  const leaveRoom = () => {\n    disconnectFromRoom();\n    navigate('/');\n  };\n  if (showNamePrompt) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"name-prompt-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"name-prompt-modal\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: [\"Join \", (roomData === null || roomData === void 0 ? void 0 : roomData.name) || 'Chat Room']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please enter your name to join the chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: tempUsername,\n          onChange: e => setTempUsername(e.target.value),\n          placeholder: \"Your name\",\n          autoFocus: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSetUsername,\n          disabled: !tempUsername.trim(),\n          children: \"Join Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"room-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: (roomData === null || roomData === void 0 ? void 0 : roomData.name) || 'Chat Room'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"participant-count\",\n          children: [participants.length, \" participant\", participants.length !== 1 ? 's' : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: leaveRoom,\n        className: \"leave-button\",\n        children: \"Leave Room\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"sidebar\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Participants\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"participants-list\",\n          children: participants.map((user, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: user === username ? 'current-user' : '',\n            children: [user, \" \", user === username && '(you)']\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-main\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"messages-container\",\n          children: [messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `message ${msg.type}`,\n            children: [msg.type === 'received' && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sender\",\n              children: msg.sender\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 45\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-bubble\",\n              children: msg.text\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 17\n            }, this), msg.type === 'sent' && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sender\",\n              children: \"You\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 41\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 15\n          }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: messagesEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: sendMessage,\n          className: \"message-form\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: inputMessage,\n            onChange: e => setInputMessage(e.target.value),\n            placeholder: \"Type a message...\",\n            disabled: !connected,\n            className: \"message-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: !connected || !inputMessage.trim(),\n            className: \"send-button\",\n            children: \"Send\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-message\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 170,\n    columnNumber: 5\n  }, this);\n}\n_s(Chat, \"c84Zkbo0E/TZBoeqXtCWp1VbPJQ=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = Chat;\nexport default Chat;\nvar _c;\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useParams","useNavigate","jsxDEV","_jsxDEV","Chat","roomData","username","setUsername","_s","roomId","navigate","messages","setMessages","inputMessage","setInputMessage","participants","setParticipants","connected","setConnected","showNamePrompt","setShowNamePrompt","tempUsername","setTempUsername","error","setError","socketRef","messagesEndRef","connectToRoom","disconnectFromRoom","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","wsUrl","socket","WebSocket","onopen","console","log","prev","text","type","onmessage","event","data","message","JSON","parse","users","filter","user","sender","onerror","err","close","handleSetUsername","trim","sendMessage","e","preventDefault","messageObject","timestamp","Date","toISOString","send","stringify","leaveRoom","className","children","name","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","placeholder","autoFocus","onClick","disabled","length","map","index","msg","ref","onSubmit","_c","$RefreshReg$"],"sources":["A:/Akka/Ping-Pong-FE/ping-pong/src/Components/Chat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport '../Styles/Chat.css';\r\n\r\nfunction Chat({ roomData, username, setUsername }) {\r\n  const { roomId } = useParams();\r\n  const navigate = useNavigate();\r\n  \r\n  const [messages, setMessages] = useState([]);\r\n  const [inputMessage, setInputMessage] = useState('');\r\n  const [participants, setParticipants] = useState([]);\r\n  const [connected, setConnected] = useState(false);\r\n  const [showNamePrompt, setShowNamePrompt] = useState(!username);\r\n  const [tempUsername, setTempUsername] = useState('');\r\n  const [error, setError] = useState(null);\r\n  \r\n  const socketRef = useRef(null);\r\n  const messagesEndRef = useRef(null);\r\n\r\n  // Handle initial connection and cleanup\r\n  useEffect(() => {\r\n    if (username && !connected) {\r\n      connectToRoom();\r\n    }\r\n\r\n    return () => {\r\n      disconnectFromRoom();\r\n    };\r\n  }, [roomId, username]);\r\n\r\n\r\n  // Auto-scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  const connectToRoom = () => {\r\n    try {\r\n      const wsUrl = `ws://localhost:8080/ws/chat/roomId=${roomId}`;\r\n      const socket = new WebSocket(wsUrl);\r\n      socketRef.current = socket;\r\n\r\n\r\n      socket.onopen = () => {\r\n        console.log('WebSocket connection established');\r\n        setConnected(true);\r\n        \r\n        // Send join message with username\r\n        // const joinMessage = {\r\n        //   type: 'JOIN',\r\n        //   username: username,\r\n        //   timestamp: new Date().toISOString()\r\n        // };\r\n        // socket.send(JSON.stringify(joinMessage));\r\n        \r\n        // Add system message\r\n        setMessages(prev => [...prev, { \r\n          text: `You joined the chat as ${username}`, \r\n          type: 'system' \r\n        }]);\r\n      };\r\n\r\n      socket.onmessage = (event) => {\r\n        console.log(event.data)\r\n        const message = JSON.parse(event.data);\r\n        \r\n        if (message.type === 'USER_LIST') {\r\n          setParticipants(message.users);\r\n        } else if (message.type === 'USER_JOINED') {\r\n          setParticipants(prev => [...prev, message.username]);\r\n          setMessages(prev => [...prev, { \r\n            text: `${message.username} joined the chat`, \r\n            type: 'system' \r\n          }]);\r\n        } else if (message.type === 'USER_LEFT') {\r\n          setParticipants(prev => prev.filter(user => user !== message.username));\r\n          setMessages(prev => [...prev, { \r\n            text: `${message.username} left the chat`, \r\n            type: 'system' \r\n          }]);\r\n        } else {\r\n          // Regular chat message\r\n          setMessages(prev => [...prev, { \r\n            text: message.text, \r\n            type: message.username === username ? 'sent' : 'received', \r\n            sender: message.username \r\n          }]);\r\n        }\r\n      };\r\n\r\n      // socket.onclose = () => {\r\n      //   console.log('WebSocket connection closed');\r\n      //   setConnected(false);\r\n      //   setMessages(prev => [...prev, { text: 'Disconnected from chat server', type: 'system' }]);\r\n      // };\r\n\r\n      socket.onerror = (error) => {\r\n        console.error('WebSocket error:', error);\r\n        setError('Connection error. Please try again.');\r\n        setConnected(false);\r\n      };\r\n    } catch (err) {\r\n      setError(`WebSocket connection error: ${err.message}`);\r\n    }\r\n  };\r\n\r\n  const disconnectFromRoom = () => {\r\n    if (socketRef.current) {\r\n      socketRef.current.close();\r\n      socketRef.current = null;\r\n    }\r\n  };\r\n\r\n  const handleSetUsername = () => {\r\n    if (!tempUsername.trim()) return;\r\n    \r\n    setUsername(tempUsername);\r\n    setShowNamePrompt(false);\r\n  };\r\n\r\n  const sendMessage = (e) => {\r\n    e.preventDefault();\r\n    if (!inputMessage.trim() || !connected || !socketRef.current) return;\r\n\r\n    const messageObject = {\r\n      type: 'MESSAGE',\r\n      text: inputMessage,\r\n      username: username,\r\n      timestamp: new Date().toISOString()\r\n    };\r\n\r\n    socketRef.current.send(JSON.stringify(messageObject));\r\n    setInputMessage('');\r\n  };\r\n\r\n  const leaveRoom = () => {\r\n    disconnectFromRoom();\r\n    navigate('/');\r\n  };\r\n\r\n  if (showNamePrompt) {\r\n    return (\r\n      <div className=\"name-prompt-overlay\">\r\n        <div className=\"name-prompt-modal\">\r\n          <h2>Join {roomData?.name || 'Chat Room'}</h2>\r\n          <p>Please enter your name to join the chat</p>\r\n          <input\r\n            type=\"text\"\r\n            value={tempUsername}\r\n            onChange={(e) => setTempUsername(e.target.value)}\r\n            placeholder=\"Your name\"\r\n            autoFocus\r\n          />\r\n          <button \r\n            onClick={handleSetUsername}\r\n            disabled={!tempUsername.trim()}\r\n          >\r\n            Join Chat\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"chat-page\">\r\n      <div className=\"chat-header\">\r\n        <div className=\"room-info\">\r\n          <h2>{roomData?.name || 'Chat Room'}</h2>\r\n          <span className=\"participant-count\">\r\n            {participants.length} participant{participants.length !== 1 ? 's' : ''}\r\n          </span>\r\n        </div>\r\n        <button onClick={leaveRoom} className=\"leave-button\">\r\n          Leave Room\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"chat-container\">\r\n        <div className=\"sidebar\">\r\n          <h3>Participants</h3>\r\n          <ul className=\"participants-list\">\r\n            {participants.map((user, index) => (\r\n              <li key={index} className={user === username ? 'current-user' : ''}>\r\n                {user} {user === username && '(you)'}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n\r\n        <div className=\"chat-main\">\r\n          <div className=\"messages-container\">\r\n            {messages.map((msg, index) => (\r\n              <div key={index} className={`message ${msg.type}`}>\r\n                {msg.type === 'received' && <span className=\"sender\">{msg.sender}</span>}\r\n                <div className=\"message-bubble\">{msg.text}</div>\r\n                {msg.type === 'sent' && <span className=\"sender\">You</span>}\r\n              </div>\r\n            ))}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n\r\n          <form onSubmit={sendMessage} className=\"message-form\">\r\n            <input\r\n              type=\"text\"\r\n              value={inputMessage}\r\n              onChange={(e) => setInputMessage(e.target.value)}\r\n              placeholder=\"Type a message...\"\r\n              disabled={!connected}\r\n              className=\"message-input\"\r\n            />\r\n            <button \r\n              type=\"submit\" \r\n              disabled={!connected || !inputMessage.trim()}\r\n              className=\"send-button\">\r\n              Send\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}